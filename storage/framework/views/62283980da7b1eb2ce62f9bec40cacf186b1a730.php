<div class="row"> <div class="col-md-12"> <?php if(session()->has('user_created')): ?> <div class="alert alert-success alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button> <strong><?php echo e(session('user_created')); ?></strong> </div> <?php endif; ?> <?php if(session()->has('user_deleted')): ?> <div class="alert alert-success alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button> <strong><?php echo e(session('user_deleted')); ?></strong> </div> <?php endif; ?> <?php if(session()->has('user_not_deleted')): ?> <div class="alert alert-danger alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button> <strong><?php echo e(session('user_not_deleted')); ?></strong> </div> <?php endif; ?> <div class="panel panel-default"> <div class="panel-heading"> <?php if(!empty($search = request()->s)): ?> <?php echo app('translator')->getFromJson('Showing :total_customers customers with :per_page customers per page for keyword: <strong>:keyword</strong>', ['total_customers'=>$users->total(), 'per_page'=>$users->perPage(), 'keyword'=>$search]); ?>&nbsp;&nbsp;<a class="text-primary" href="<?php echo e(url('manage/customers')); ?>"><?php echo app('translator')->getFromJson('Show all'); ?></a> <?php else: ?> <?php echo app('translator')->getFromJson('Showing :total_users customers with :per_page customers per page', ['total_users'=>$users->total(), 'per_page'=>$users->perPage()]); ?> <?php endif; ?> <?php if(empty(request()->all)): ?> <br> <a href="<?php echo e(url('manage/customers')); ?>?all=1"><?php echo app('translator')->getFromJson('Show customers in a single page'); ?></a> <?php else: ?> <br> <a href="<?php echo e(url('manage/customers')); ?>"><?php echo app('translator')->getFromJson('Show customers with pagination'); ?></a> <?php endif; ?> </div> <div class="panel-body"> <form id="delete-form" action="delete/customers" method="post" class="form-inline"> <div class="row"> <?php if (app(\Illuminate\Contracts\Auth\Access\Gate::class)->check('update-customers', App\Other::class)): ?> <?php echo e(csrf_field()); ?> <div class="col-md-4"> <div class="text-muted"> <label for="checkboxArray"><?php echo app('translator')->getFromJson('Bulk Options'); ?> <i class="fa fa-cog" aria-hidden="true"></i></label> </div> <input type="hidden" name="_method" value="DELETE"> <div class="form-group"> <select name="checkboxArray" class="form-control"> <option value=""><?php echo app('translator')->getFromJson('Delete'); ?></option> </select> </div> <div class="form-group"> <input id="delete_all" name="" class="btn fa btn-warning" value="&#xf1d8;" onclick=" if(confirm('<?php echo app('translator')->getFromJson('Are you sure you want to delete selected users? All data related to these users will also be deleted.'); ?>')) { $('#delete_all').attr('name', 'delete_all'); event.preventDefault(); $('#delete-form').submit(); } else { event.preventDefault(); } " > </div> </div> <?php endif; ?> <div class="form-inline search-box pull-right text-right col-md-6"> <div class="form-group search-field-box"> <input type="text" class="form-control" name="search" id="keyword" placeholder="Enter name, username or email" value="<?php echo e(request()->s); ?>"> </div> <button data-url="<?php echo e(url('manage/customers')); ?>" type="button" class="btn btn-primary" id="search-btn"><?php echo app('translator')->getFromJson('Search'); ?></button> </div> </div> <div class="table-responsive"> <table class="display table table-striped table-bordered table-hover" id="users-table"> <thead> <tr> <?php if (app(\Illuminate\Contracts\Auth\Access\Gate::class)->check('update-customers', App\Other::class)): ?> <th><input type="checkbox" id="options"></th> <?php endif; ?> <th><?php echo app('translator')->getFromJson('Name'); ?></th> <th><?php echo app('translator')->getFromJson('Username'); ?></th> <th><?php echo app('translator')->getFromJson('Email'); ?></th> <?php if($phone_verification): ?> <th width="20px;"><?php echo app('translator')->getFromJson('Phone'); ?></th> <?php endif; ?> <th width="20px;"><?php echo app('translator')->getFromJson('Role'); ?></th> <th><?php echo app('translator')->getFromJson('Status'); ?></th> <th><?php echo app('translator')->getFromJson('Created'); ?></th> <?php if (app(\Illuminate\Contracts\Auth\Access\Gate::class)->check('read', App\Order::class)): ?> <th><?php echo app('translator')->getFromJson('Orders'); ?></th> <?php endif; ?> <?php if (app(\Illuminate\Contracts\Auth\Access\Gate::class)->check('update-customers', App\Other::class)): ?> <th><?php echo app('translator')->getFromJson('Action'); ?></th> <?php endif; ?> </tr> </thead> <tbody> <?php if($users): ?> <?php $__currentLoopData = $users; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $user): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <tr> <?php if (app(\Illuminate\Contracts\Auth\Access\Gate::class)->check('update-customers', App\Other::class)): ?> <td> <?php if($user->id != 1): ?> <input class="checkboxes" type="checkbox" name="checkboxArray[]" value="<?php echo e($user->id); ?>"> <?php endif; ?> </td> <?php endif; ?> <td><?php echo e($user->name); ?></td> <td><?php echo e($user->username); ?></td> <td><?php echo e($user->email); ?></td> <?php if($phone_verification): ?> <td> <?php if($user->mobile): ?> <?php if($user->mobile->verified): ?> <?php echo e($user->mobile->number); ?> <strong class="text-success">(<?php echo app('translator')->getFromJson('verified'); ?>)</strong> <?php else: ?> <?php echo e($user->mobile->number); ?> <strong class="text-danger">(<?php echo app('translator')->getFromJson('unverified'); ?>)</strong> <?php endif; ?> <?php else: ?> - <?php endif; ?> </td> <?php endif; ?> <td> <?php
                                                $user_role = \App\Helpers\Helper::get_user_role($user);
                                            ?> <?php if($user_role['role_name'] == 'Super Admin'): ?> <strong><span class="text-danger"><?php echo e($user_role['role_name']); ?></span></strong> <?php else: ?> <?php echo e($user_role['role_name']); ?> <?php endif; ?> </td> <td> <?php if($user->is_active == '1'): ?> <span class="badge bg-success"><i class="fa fa-check"></i></span> <?php else: ?> <span class="badge bg-danger"><i class="fa fa-times"></i></span> <?php endif; ?> </td> <td><?php echo e($user->created_at ? $user->created_at->diffForHumans() : '-'); ?></td> <?php if (app(\Illuminate\Contracts\Auth\Access\Gate::class)->check('read', App\Order::class)): ?> <td> <a href="<?php echo e(route('manage.customer.orders', $user->id)); ?>"> <?php echo e(count($user->orders->where('location_id', Auth::user()->location_id))); ?> </a> </td> <?php endif; ?> <?php if (app(\Illuminate\Contracts\Auth\Access\Gate::class)->check('update-customers', App\Other::class)): ?> <td> <?php if($user->id== 1 && Auth::user()->id != 1): ?> - <?php else: ?> <a class="btn btn-primary btn-sm" href="<?php echo e(route('manage.customers.edit', $user->id)); ?>"> <i class="fa fa-pencil"></i> </a> <?php if($user->id != 1): ?> &nbsp; <input type="hidden" id="delete_single" name=""> <a class="btn btn-danger btn-sm" href="" onclick=" if(confirm('<?php echo app('translator')->getFromJson('Are you sure you want to delete this user? All data related to this user will also be deleted.'); ?>')) { $('#delete_single').attr('name', 'delete_single').val(<?php echo e($user->id); ?>); event.preventDefault(); $('#delete-form').submit(); } else { event.preventDefault(); } " ><i class="fa fa-trash"></i></a> <?php endif; ?> <?php endif; ?> </td> <?php endif; ?> </tr> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> <?php endif; ?> </tbody> </table> </div> <?php if(!request()->all): ?> <div class="text-right"> <?php echo e($users->appends($_GET)->links()); ?> </div> <?php endif; ?> </form> </div> </div> </div> </div> 