<div class="row"> <div class="col-md-12"> <?php if(session()->has('order_updated')): ?> <div class="alert alert-success alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button> <strong><?php echo e(session('order_updated')); ?></strong> </div> <?php endif; ?> <?php if(session()->has('order_not_updated')): ?> <div class="alert alert-danger alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button> <span class="glyphicon glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> <strong><?php echo e(session('order_not_updated')); ?></strong> </div> <?php endif; ?> <?php echo $__env->make('includes.form_errors', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?> <style> .invoice-title h2, .invoice-title h3 { display: inline-block; } .table > tbody > tr > .no-line { border-top: none; } .table > thead > tr > .no-line { border-bottom: none; } .table > tbody > tr > .thick-line { border-top: 2px solid; } #invoice-logo { width: 70px; height: auto; } </style> <div class="row"> <div class="col-md-12"> <div class="row"> <div class="col-md-6"> <address> <strong><?php echo app('translator')->getFromJson('Billed To:'); ?></strong><br> <?php echo e($order->address->first_name); ?> <?php echo e($order->address->last_name); ?><br> <strong><?php echo app('translator')->getFromJson('Phone:'); ?></strong> <?php echo e($order->address->phone); ?><br> </address> </div> <div class="col-md-6 text-right"> <address> <strong><?php echo app('translator')->getFromJson('Shipping Address:'); ?></strong><br> <?php echo e($order->address->first_name); ?> <?php echo e($order->address->last_name); ?><br> <?php echo e($order->address->address); ?><br> <?php echo e($order->address->city); ?>, <?php echo e($order->address->state); ?> - <?php echo e($order->address->zip); ?><br> <?php echo e($order->address->country); ?>. </address> </div> </div> <div class="row"> <div class="col-md-6"> <address> <strong><?php echo app('translator')->getFromJson('Payment Status:'); ?></strong> <?php echo e($order->paid!='0' ? __('Paid') : __('Failed')); ?><br> <strong><?php echo app('translator')->getFromJson('Payment Method:'); ?></strong> <?php echo e($order->payment_method); ?><br> <strong><?php echo app('translator')->getFromJson('Order Status:'); ?></strong> <?php if($order->is_processed =='0'): ?> <?php  echo 'Pending' ?> <?php elseif($order->is_processed =='1'): ?> <?php  echo 'Refunded' ?> <?php elseif($order->is_processed =='2'): ?> <?php  echo 'Cancelled' ?> <?php elseif($order->is_processed =='3'): ?> <?php  echo 'Delivered' ?> <?php elseif($order->is_not_online_payment() && $order->paid == 0): ?> <?php  echo 'Failed' ?> <?php endif; ?> <br> </address> </div> <div class="col-md-6 text-right"> <address> <strong><?php echo app('translator')->getFromJson('Order Date:'); ?></strong><br> <?php echo e($order->created_at->toFormattedDateString()); ?><br><br> </address> </div> </div> </div> </div> <div class="row"> <div class="col-md-12"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title"><strong><?php echo app('translator')->getFromJson('Order summary'); ?></strong></h3> </div> <div class="panel-body"> <div class="table-responsive"> <table class="table table-condensed table-bordered"> <thead> <tr> <td><strong><?php echo app('translator')->getFromJson('Item'); ?></strong></td> <td class="text-center"><strong><?php echo app('translator')->getFromJson('Price'); ?></strong></td> <td class="text-center"><strong><?php echo app('translator')->getFromJson('Quantity'); ?></strong></td> <td class="text-right"><strong><?php echo app('translator')->getFromJson('Total'); ?></strong></td> </tr> </thead> <tbody> <?php 
                                    $subTotal = 0 ;
                                    $total = 0; 
                                    $GST = 0 ;
                                    $VA = 0 ;
                                    ?> <?php $__currentLoopData = $order->products; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $product): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <?php 
                                             $subTotal += $product->pivot->total - ($product->vat_rate + $product->gst_three_percent);
                                             $GST += $product->gst_three_percent;
                                             $total += $product->pivot->total ;
                                             $VA += $product->vat_rate;
                                         ?> <tr> <td><?php echo e($product->name); ?> <?php if($product->pivot->spec && ($specs = unserialize($product->pivot->spec))): ?> <br> <?php $__currentLoopData = $specs; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $key => $spec): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <em><?php echo e($spec['name']); ?>:</em> <?php echo e($spec['value']); ?><?php if(!$loop->last): ?>, <?php endif; ?> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> <?php endif; ?> </td> <td class="text-center"><i class="fa fa-rupee"></i> <?php echo e(\App\Helpers\IndianCurrencyHelper::IND_money_format($product->pivot->unit_price)); ?> </td> <td class="text-center"><?php echo e($product->pivot->quantity); ?></td> <td class="text-right"><i class="fa fa-rupee"></i> <?php echo e(\App\Helpers\IndianCurrencyHelper::IND_money_format($product->pivot->total)); ?></td> </tr> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> <tr> <td class="thick-line"></td> <td class="thick-line"></td> <td class="thick-line text-center"><strong><?php echo app('translator')->getFromJson('Subtotal'); ?></strong></td> <td class="thick-line text-right"><i class="fa fa-rupee"></i> <?php echo e(\App\Helpers\IndianCurrencyHelper::IND_money_format($subTotal)); ?></td> </tr> <tr> <td class="no-line"></td> <td class="no-line"></td> <td class="no-line text-center"><strong><?php echo app('translator')->getFromJson('GST'); ?></strong></td> <td class="no-line text-right"><i class="fa fa-rupee"></i> <?php echo e(\App\Helpers\IndianCurrencyHelper::IND_money_format($GST)); ?></td> </tr> <tr> <td class="no-line"></td> <td class="no-line"></td> <td class="no-line text-center"><strong><?php echo app('translator')->getFromJson('Value Added'); ?></strong></td> <td class="no-line text-right"><i class="fa fa-rupee"></i> <?php echo e(\App\Helpers\IndianCurrencyHelper::IND_money_format($VA)); ?></td> </tr> <tr> <td class="no-line"></td> <td class="no-line"></td> <td class="no-line text-center"><strong><?php echo app('translator')->getFromJson('Shipping Cost'); ?></strong></td> <td class="no-line text-right"><?php echo e(isset($order->shipping_cost) ? currency_format($order->shipping_cost, $order->currency) : currency_format(0, $order->currency)); ?></td> </tr> <?php if($order->coupon_amount && $order->coupon_amount > 0): ?> <tr> <td class="no-line"></td> <td class="no-line"></td> <td class="no-line text-center"><strong><?php echo app('translator')->getFromJson('Coupon Discount'); ?></strong></td> <td class="no-line text-right"><i class="fa fa-rupee"></i> <?php echo e($order->coupon_amount, $order->currency); ?> </td> </tr> <?php endif; ?> <?php if($order->wallet_amount && $order->wallet_amount > 0): ?> <tr> <td class="no-line"></td> <td class="no-line"></td> <td class="no-line text-center"><strong><?php echo app('translator')->getFromJson('Wallet Used'); ?></strong></td> <td class="no-line text-right"><i class="fa fa-rupee"></i> <?php echo e(\App\Helpers\IndianCurrencyHelper::IND_money_format($order->wallet_amount)); ?> </td> </tr> <?php endif; ?> <tr> <td class="no-line"></td> <td class="no-line"></td> <td class="no-line text-center"><strong><?php echo app('translator')->getFromJson('Total'); ?></strong></td> <td class="no-line text-right"><i class="fa fa-rupee"></i> <?php echo e(\App\Helpers\IndianCurrencyHelper::IND_money_format($total - $order->wallet_amount - $order->coupon_amount + $order->shipping_cost + ($order->total * $order->tax) / 100)); ?> </td> </tr> </tbody> </table> </div> </div> </div> </div> </div> <hr> <?php echo Form::model($order, ['method'=>'patch', 'action'=>['ManageOrdersController@update', $order->id], 'id'=>'update-form-'.$order->id]); ?> <div class="row"> <div class="col-md-6"> <label>Order Process</label> <select name="is_processed" class="form-control" id="is_processed"> <option <?php echo e($order->is_processed == '0' ? 'selected="selected"' : ''); ?> value="0">Pending</option> <option <?php echo e($order->is_processed == '1' ? 'selected="selected"' : ''); ?> value="1">Refunded</option> <option <?php echo e($order->is_processed == '2' ? 'selected="selected"' : ''); ?> value="2">Cancelled</option> <option <?php echo e($order->is_processed == '3' ? 'selected="selected"' : ''); ?> value="3">Delivered</option> </select> </div> </div> <hr> <a href="" class='btn btn-primary col-xs-3 col-sm-3 pull-left' onclick=" if(confirm('<?php echo app('translator')->getFromJson('Are you sure you want to update this?'); ?>')) { event.preventDefault(); $('#update-form-<?php echo e($order->id); ?>').submit(); } else { event.preventDefault(); } " ><?php echo app('translator')->getFromJson('Update'); ?></a> <?php echo Form::close(); ?> </div> </div>