<div class="row"> <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6"> <?php if(session()->has('category_updated')): ?> <div class="alert alert-success alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button> <strong><?php echo e(session('category_updated')); ?></strong> <a target="_blank" href="<?php echo e(route('front.category.show', $category->slug)); ?>"><?php echo app('translator')->getFromJson('View'); ?></a> </div> <?php endif; ?> <?php echo $__env->make('includes.form_errors', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?> <?php echo Form::model($category, ['method'=>'patch', 'action'=>['ManageCategoriesController@update', $category->id], 'files'=>true, 'onsubmit'=>'submit_button.disabled = true; submit_button.value = "' . __('Please Wait...') . '"; return true;']); ?> <?php echo Form::hidden('id', $category->id); ?> <div class="row"> <?php if(isset($category->category_img) && $category->category_img!=''): ?> <div class="col-md-6 col-sm-8 col-xs-12"> <?php echo app('translator')->getFromJson('Category Image:'); ?> <?php if(file_exists('storage/style/topcategory/'.$category->category_img)): ?> <input type="hidden" name="old_category_img" id="old_category_img" value="<?php echo e($category->category_img); ?>" /> <img src="<?php echo e(asset('storage/style/topcategory/'.$category->category_img)); ?>" class="img-responsive" alt="Category"> <div class="form-group"> <div class="has-error"> <div class="checkbox"> <label> <?php echo Form::checkbox('remove_category_photo'); ?> <strong><?php echo app('translator')->getFromJson('Remove Image'); ?></strong> </label> </div> </div> </div> <?php endif; ?> <br><br> </div> <?php endif; ?> </div> <div class="row"> <?php if(isset($category->banner) && $category->banner!=''): ?> <div class="col-md-6 col-sm-8 col-xs-12"> <?php echo app('translator')->getFromJson('Banner Image:'); ?> <?php if(isset($category->banner) && $category->banner!=''): ?> <?php if(file_exists('storage/style/banner/'.$category->banner)): ?> <input type="hidden" name="old_banner" id="old_banner" value="<?php echo e($category->banner); ?>" /> <img src="<?php echo e(asset('storage/style/banner/'.$category->banner)); ?>" class="img-responsive" alt="Category"> <div class="form-group"> <div class="has-error"> <div class="checkbox"> <label> <?php echo Form::checkbox('remove_photo'); ?> <strong><?php echo app('translator')->getFromJson('Remove Image'); ?></strong> </label> </div> </div> </div> <?php endif; ?> <?php endif; ?> <br><br> </div> <?php endif; ?> </div> <div class="form-group<?php echo e($errors->has('category') ? ' has-error' : ''); ?>"> <?php echo Form::label('name', __('Category Name:')); ?> <?php echo Form::text('name', $category->name, ['class'=>'form-control', 'placeholder'=>__('Enter category name'), 'required']); ?> </div> <?php echo Form::hidden('parent', 0, []); ?> <div class="form-group<?php echo e($errors->has('priority') ? ' has-error' : ''); ?>"> <?php echo Form::label('priority', __('Order No: (to display under Menus)')); ?> <?php echo Form::number('priority', isset($category->priority) ? $category->priority : 1, ['class'=>'form-control', 'placeholder'=>__('Enter order by'), 'min'=>'1']); ?> </div> <div class="form-group<?php echo e($errors->has('top_category_priority') ? ' has-error' : ''); ?>"> <?php echo Form::label('top_category_priority', __('Order No: (to display under Top Categories Home Page)')); ?> <?php echo Form::number('top_category_priority', isset($category->top_category_priority) ? $category->top_category_priority : 1, ['class'=>'form-control', 'placeholder'=>__('Enter order by top category'), 'min'=>'1']); ?> </div> <div class="form-group<?php echo e($errors->has('min_price') ? ' has-error' : ''); ?>"> <?php echo Form::label('min_price', __('Min Price:')); ?> <?php echo Form::number('min_price', old('min_price'), ['class'=>'form-control','step'=>'5000', 'placeholder'=>__('Enter Min Price')]); ?> </div> <div class="form-group<?php echo e($errors->has('max_price') ? ' has-error' : ''); ?>"> <?php echo Form::label('max_price', __('Max Price:')); ?> <?php echo Form::number('max_price', old('max_price'), ['class'=>'form-control','step'=>'5000', 'placeholder'=>__('Enter Max Price')]); ?> </div> <div class="checkbox"> <label> <input type="checkbox" name="show_in_slider" value="1" <?php if($category->show_in_slider): ?> checked <?php endif; ?>> <strong><?php echo app('translator')->getFromJson('Show in Top Categories'); ?></strong> </label> </div> <div class="checkbox"> <label> <input type="checkbox" name="show_filter_price" value="1" <?php if($category->show_filter_price): ?> checked <?php endif; ?>> <strong><?php echo app('translator')->getFromJson('Show Filter Price'); ?></strong> </label> </div> <div class="checkbox"> <label> <input type="checkbox" name="show_filter_metal" value="1" <?php if($category->show_filter_metal): ?> checked <?php endif; ?>> <strong><?php echo app('translator')->getFromJson('Show Filter Metal'); ?></strong> </label> </div> <div class="checkbox"> <label> <input type="checkbox" name="show_filter_purity" value="1" <?php if($category->show_filter_purity): ?> checked <?php endif; ?>> <strong><?php echo app('translator')->getFromJson('Show Filter Purity'); ?></strong> </label> </div> <div class="checkbox"> <label> <input type="checkbox" name="show_filter_gender" value="1" <?php if($category->show_filter_gender): ?> checked <?php endif; ?>> <strong><?php echo app('translator')->getFromJson('Show Filter Gender'); ?></strong> </label> </div> <div class="checkbox"> <label> <input type="checkbox" name="show_filter_offers" value="1" <?php if($category->show_filter_offers): ?> checked <?php endif; ?>> <strong><?php echo app('translator')->getFromJson('Show Filter Offers'); ?></strong> </label> </div> <div class="checkbox"> <label> <input type="checkbox" name="show_filter_short_by" value="1" <?php if($category->show_filter_short_by): ?> checked <?php endif; ?>> <strong><?php echo app('translator')->getFromJson('Show Filter Sort By'); ?></strong> </label> </div> <div class="form-group"> <?php echo Form::label('category_img', __('Choose Category Image'), ['class'=>'btn btn-default btn-file']); ?> <?php echo Form::file('category_img',['class'=>'form-control categoryImage', 'style'=>'display: none;','onchange'=>'$("#upload-file-info1").html(files[0].name)']); ?> <span id="CatimgError"></span> <span class='label label-info' id="upload-file-info1"><?php echo app('translator')->getFromJson('No image chosen'); ?></span><em style="color:red;">(Dimensions:- 370*300)</em> </div> <div class="form-group"> <?php echo Form::label('banner', __('Choose Banner Image'), ['class'=>'btn btn-default btn-file']); ?> <?php echo Form::file('banner',['class'=>'form-control bannerImage', 'style'=>'display: none;','onchange'=>'$("#upload-file-info").html(files[0].name)']); ?> <span id="imgError"></span> <span class='label label-info' id="upload-file-info"><?php echo app('translator')->getFromJson('No image chosen'); ?></span> <em style="color:red;">(Dimensions:- 1600*400)</em> </div> <div class="form-group<?php echo e($errors->has('status') ? ' has-error' : ''); ?>"> <?php echo Form::label('status', __('Status:')); ?> <?php echo Form::select('status', [0=>__('inactive'), 1=>__('active')], $category->is_active, ['class'=>'form-control selectpicker', 'data-style'=>'btn-default']); ?> </div> <?php echo $__env->make('partials.manage.meta-fields', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?> <div class="form-group"> <?php echo Form::submit(__('Update'), ['class'=>'btn btn-primary col-xs-6 col-sm-6 pull-left', 'id'=>'submit_button','name'=>'submit_button']); ?> </div> <?php echo Form::close(); ?> </div> <?php if(count($root_categories) > 0): ?> <div class="col-md-6"> <h4 class="text-info"><?php echo app('translator')->getFromJson('Categories Tree:'); ?></h4> <ul id="tree1"> <?php $__currentLoopData = $root_categories; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $category): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <?php 
                        

                    $product =  \App\Product::whereHas('product_category_styles', function ($query) use($category)  {
                                    $query->where('category_id', $category->id);
                                })->where(function ($query) {
                                    $query->where('product_group_default', 1)->where('product_group', 1)->orWhere('product_group',  null);
                                })->where('is_active','1')->where('category_id', $category->id)->count();
                    ?> <li> <?php echo e($category->name . ' ('.$product.')'); ?> <?php if(count($category->categories)): ?> <?php echo $__env->make('partials.manage.subcategories', ['childs' => $category->categories], array_except(get_defined_vars(), array('__data', '__path')))->render(); ?> <?php endif; ?> </li> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> </ul> </div> <?php endif; ?> </div> 